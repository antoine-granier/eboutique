{% extends 'base.html.twig' %}

{% block title %}Register{% endblock %}

{% block stylesheets %}
    <link rel="stylesheet" type="text/css" href="{{ asset('/css/auth.css') }}">
{% endblock %}

{% block body %}
    <main class="form-auth">
        {% if app.user %}
            <div class="mb-3">
                You are logged in as {{ app.user.email }}, <a href="{{ path('app_logout') }}">Logout</a>
            </div>
            <a href="{{ path('app_home') }}">Back to home</a>
        {% else %}
            {{ form_start(registrationForm) }}
            <a href="{{ path('app_home') }}" class="text-dark text-decoration-none">
                <svg xmlns="http://www.w3.org/2000/svg" fill="none" width="40" viewBox="0 0 24 24" stroke-width="1.5" stroke="black" class="w-6 h-6">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M10.5 1.5H8.25A2.25 2.25 0 006 3.75v16.5a2.25 2.25 0 002.25 2.25h7.5A2.25 2.25 0 0018 20.25V3.75a2.25 2.25 0 00-2.25-2.25H13.5m-3 0V3h3V1.5m-3 0h3m-3 18.75h3" />
                </svg>
                Ephone
            </a>
            <h1 class="h3 mb-3 fw-normal">Register</h1>

            {% if not registrationForm.vars.valid %}
                <div class="alert alert-danger">
                    <ul class="mb-0">
                        {% for child in registrationForm.children %}
                            {% for error in child.vars.errors %}
                                <li>{{ error.message }}</li>
                            {% endfor %}
                        {% endfor %}
                    </ul>
                </div>
            {% endif %}

            <div class="form-floating">
                {{ form_widget(registrationForm.firstName) }}
                {{ form_label(registrationForm.firstName) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.lastName) }}
                {{ form_label(registrationForm.lastName) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.email) }}
                {{ form_label(registrationForm.email) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.phone) }}
                {{ form_label(registrationForm.phone) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.plainPassword) }}
                {{ form_label(registrationForm.plainPassword) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.address) }}
                {{ form_label(registrationForm.address) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.zipCode) }}
                {{ form_label(registrationForm.zipCode) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.city) }}
                {{ form_label(registrationForm.city) }}
            </div>
            <div class="form-floating">
                {{ form_widget(registrationForm.country) }}
                {{ form_label(registrationForm.country) }}
            </div>
            <div class="form-check">
                {{ form_widget(registrationForm.agreeTerms) }}
                {{ form_label(registrationForm.agreeTerms) }}
            </div>

            <button class="w-100 btn btn-lg btn-primary" type="submit">Register</button>

            <p class="my-3 text-muted">Already register ? <a href="{{ path('app_login') }}">Sign in</a></p>
            {{ form_end(registrationForm) }}
        {% endif %}
    </main>
{% endblock %}
